\chapter{Prometheus with Grafana\\
\small{\textit{-- Nataly Jimenez, Nicole Valdiviezo, Lakshya Vegiraju}}
\index{PrometheusGrafana} 
\index{Chapter!PrometheusGrafana}
\label{Chapter::PrometheusGrafana}}

\section{Step 1: Setup and Verification}

\subsection{Overview}
For this project, our group set up Prometheus for collecting metrics and set up Grafana for visualizing metics. Additionally, we also added a node-exporter to collect system level metrics, imported a pre-built dashboard into Grafana and monitored and interpreted the system health metrics in real time. 

\subsection{Procedure}
\begin{enumerate}
    \item Created the project directory \texttt{PrometheusGrafana}.
    \item Wrote the \texttt{docker-compose.yml} file with three services: Prometheus, Grafana, and Node Exporter.
    \item Configured Prometheus to scrape data from itself and from Node Exporter by editing the \texttt{prometheus.yml} configuration file.
    \item Configured Grafana to connect to Prometheus using a data source defined in \texttt{datasource.yml}.
    \item Deployed all containers using:
    \begin{verbatim}
    docker compose up -d
    \end{verbatim}
    \item Verified that all containers were running using \texttt{docker ps}.
    \item Confirmed that the Prometheus and Node Exporter targets were up by visiting \url{http://localhost:9091/targets}.
\end{enumerate}


\section{Step 2: Visualization and Dashboard Setup}
\begin{enumerate}
    \item Accessed Grafana at \url{http://localhost:3000} and logged in using the default credentials (\texttt{admin/admin}).
    \item Verified that the Prometheus data source was correctly configured at \url{http://prometheus:9091}.
    \item Imported Dashboard \#1860 (Node Exporter Full) using Grafanaâ€™s import feature.
    \item Set the time range to ``Last 5 minutes'' and auto-refresh interval to 10 seconds.
    \item Observed real-time metrics including CPU load, memory usage, disk I/O, and network throughput.
\end{enumerate}

\section{Step 3: Roles of Prometheus, Grafana, and Node Exporter}
Prometheus is a time-series monitoring system that scrapes and stores metrics from configured targets at set intervals. Grafana is a visualization platform that connects to Prometheus and displays metrics in customizable dashboards for monitoring and analysis. Node Exporter runs on the host machine and exposes system-level metrics such as CPU, memory, disk, and network statistics in a Prometheus-compatible format. Together, these three tools provide a complete open-source monitoring solution that enables users to observe system performance, detect bottlenecks, and ensure overall system health in real time.

\section{Step 4: Dashboard Interpretation and System Health}
Dashboard 1860 visualizes various hardware and system metrics collected by Node Exporter. It shows CPU utilization across cores, available and used memory, disk I/O activity, and network transmission rates. A healthy system will typically display moderate CPU and memory usage, stable load averages, and consistent network throughput. Sharp spikes or persistently high utilization indicate potential performance issues or resource bottlenecks. By monitoring these panels, we can assess system health and take preventive action before failures occur.

\section{Step 5: Deliverables}
\begin{itemize}
    \item Prometheus UI at \url{http://localhost:9091}
    \item Grafana Dashboard 1860 with live metrics
    \item GitHub: \url{https://github.com/natalyjc/devops.git}
\end{itemize}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.6\linewidth]{Book_SSW590_1/png/Prometheus.png}
    \caption{Prometheus Screenshot}
    \label{Prometheus Screenshot}
\end{figure}

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.6\linewidth]{Book_SSW590_1/png/grafana.png}
    \caption{Grafana Screenshot}
    \label{Grafana Screenshot}
\end{figure}